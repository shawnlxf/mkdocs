## 1. 目标

* JS 对象

## 2. 主体

对象 object (唯一一种复杂类型)

### 1) 定义

* 定义

    * 无序的数据集合
    * 键值对的集合

* 写法
* 声明对象的两种语法

    1.

        let obj = { 'name': 'frank', 'age': 18 }
    
    2.

        let obj = new Object({'name': 'frank'})

    匿名对象

        console.log({ 'name': 'frank', 'age': 18 })

* 细节

    * 键名是字符串，不是标识符，可以包含任意字符
    * 引号可省略，省略之后就只能写标识符
    * 就算引号省略了，键名也还是字符串（重要）

### 2) 属性

1. 属性名

    > 每一个 key 都是对象的属性名（property）
    >
    > 读对象的属性时，
    >
    > 如果使用 [ ] 语法，那么 JS 会先求 [ ] 中表达式的值，注意区分表达式是变量还是常量。
    >
    > 如果使用点语法，那么点后面一定是 string 常量。

    * 所有的属性名会自动变成字符串

        > Object.keys(obj) 可以得到 obj 的所有 key

        ![](../img/FF/12-object-keys.png)

    * 变量作属性名

        > 不加 [] 的属性名会自动变成字符串
        >
        > 加了 [] 则会当做变量求值；值如果不是字符串，则会自动变成字符串

        ![](../img/FF/12-变量作属性名.png)

    * 除了字符串，symbol 也能做属性名（超纲知识）

        > 目前没用，在学习“迭代”时会用到

        ![](../img/FF/12-symbol做属性.png)


2. 属性值

    > 每个 value 都是对象的属性值

### 3) 原型

* 对象的隐藏属性

    > JS 中每一个对象都有一个隐藏属性
    >
    > 这个隐藏属性储存着其 共有属性组成的对象 的地址
    >
    > 这个 共有属性组成的对象 叫做 原型
    * 也就是说，隐藏属性储存着 原型 的地址

* 原型

    * 对象的原型也是对象
    * 这个对象里有 toString / constructor / valueOf 等属性
    * obj = {} 的原型即为 所有对象的原型

        > 这个原型包含所有对象的共有属性，是 对象的根
        >
        > 这个原型也有原型，是 null

### 4) 增删改查 对象的属性

1. 删除属性

    * delete obj.xxx 或 delete obj['xxx']

    * 判断

        * 'xxx' in obj === false

            > 不含属性名

        * 'xxx' in obj && obj.xxx === undefined

            > 含有属性名，但是值为 undefined
            >
            > 注意：obj.xxx === undefined 不能断定 'xxx' 是否为 obj 的属性

2. 查看属性（读属性）

    1. 所有属性

        * Object.keys(obj)

            > 查看自身所有属性

            ![](.../img/FF/../../../../img/FF/12-object-entries.png)
    

        * console.dir(obj)

            > 查看自身 + 共有属性
            >
            > 或者用 Object.keys 打印出 obj.\_\_proto\_\_

        * 判断

            * obj.hasOwnProperty('toString')

                > 判断一个属性是自身的还是共有的

    2. 单个属性（两种方法）

        1. obj['key']

            > 中括号语法
            >
            > obj[key] // 变量 key值一般不为 'key'

        2. obj.key

            > 点语法，先它翻译为第一种方法再理解

3. 修改 或 增加属性（写属性）

    1. 直接赋值

        * obj.name = 'frank'
        * obj['name'] = 'frank'
        * obj['na' + 'me'] = 'frank'

        > 无法通过自身 修改或增加 共有属性
        >
        > 可以强行修改或增加原型上的属性 
        >
        > 1. obj.\_\_proto\_\_['toString'] = 'xxx' // 不推荐用 \_\_proto\_\_，好像有性能问题
        >
        > 2. Object.prototype.toString = 'xxx'
        >
        > 一般来说不要修改原型，会引起很多问题

    2. 批量赋值

        * Object.assign(obj, {age: 18, gender: 'man'})

    3. 修改隐藏属性

        * 不推荐使用 obj.\_\_proto\_\_ = common  // 所有 \_\_proto\_\_ 代码都不推荐写
        * 推荐使用 Object.create

            > 规范大概的意思是，要改就一开始就改，别后来再改

                let obj = Object.create(common)
                obj.name = 'frank'
                let obj2 = Object.create(common)
                obj2.name = 'jack'








