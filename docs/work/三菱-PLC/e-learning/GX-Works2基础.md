
## 第1章 控制可编程控制器系统

> 介绍可编程控制器系统的控制中使用的程序语言及编程软件。（MELSEC-Q系列/L系列）
>
> 通过USB/LAN电缆等连接

??? info "可编程控制器系统的构建步骤"

    本课程将按照创建软件方面的工序步骤进行学习。

    ![][软件设计]

??? info "顺控程序的编写步骤"

    ![][编写步骤]

## 第2章 程序设计

> 学习如何明确控制内容，以及转换为程序时的设计方法。
>
> 1. 明确控制内容
> 2. 制作输入输出设备与软元件编号的对应表
> 3. 设计程序

??? info "课题系统的设备构成图与一览表"

    ![][设备构成]

??? note "制作输入输出设备与软元件编号的对应表"

    制作对应表可以减少软元件编号的输入错误，提高编程效率。

    如果硬件负责人等已经制作了对应表，请向其索取。

    ![][对应表]

??? note "设计程序"

    ![][设计程序]

## 第3章 编程

> 学习使用专用软件GX Works2的编程方法。

??? note "1. 建立项目"

    ??? info "项目以GX Works2管理程序等为单位，包含以下数据"

        ![][建立项目-1]

    ??? info "在GX Works2中，可选择以下所示2种工程形式"

        在本课程中学习通常使用的“简单工程”。

        ![][建立项目-2]

    ??? info "标签(Labeb)功能"

        可使用与软元件编号相关的标签名称（机器名称等）编写程序的功能。

        对于简单项目，可选择是否使用标签功能。

        本课程不使用标签功能。
        
    ??? note "新建工程"

        ??? info "新建工程时，需要进行以下项目的设定"

            请事先掌握要使用工程的种类、可编程控制器的系列、型号。

            ![][建立项目-3]

        步骤：工程 -> 新建工程

        ![][建立项目-4]

??? note "2. 编写程序"

    一边编写以下程序，一边学习基本的操作方法（指令输入、变更、删除、复制&粘贴、画线/删线）

    ??? tip "复制&粘贴"

        1. 在第3行插入新的行：编辑 -> 行插入
        2. 选择要在新的一行中复制&粘贴的回路。

            > 点击选择开始位置(X6)，在按住SHIFT键的同时，点击选择结束位置(Y0)，选中了第一行回路

        3. 编辑 -> 复制
        4. 点击粘贴位置（插入行的起始位置）：编辑 -> 粘贴

    ??? tip "删除"
    
        步骤：编辑 -> 删除

        ![][编写程序-1]
        ![][编写程序-2]

??? note "3. 编写容易理解的程序"

    编写的程序只显示指令、软元件编号、线条。

    如果是复杂且大规模的程序，则无法通过查看就能轻易掌握控制内容。

    * 程序错误（错误的指令、软元件编号的输入等）的原因
    * 难以发现程序的故障原因
    * 接替的程序负责人无法掌握控制内容

    ??? success "对策"

        添加程序的控制内容及设备名称等注释。

        添加注释后，易于掌握程序的控制内容。

        这样，编写的程序不仅自己、别人也容易理解，因此请认真编辑注释。

        ![][注释-1]

        在GXWorks2中，可输入3种注释。

        ![][注释-2]
        ![][注释-3]
        ![][注释-4]

??? note "4. 变换为可执行程序的形式"

    程序完成后，变换成CPU模块可执行的形式。

    未变换的程序不能执行和保存。

    ![][变换成可执行-2]
    ![][变换成可执行-1]

??? note "5. 保存工程"

    变换结束后，保存含程序的工程。不保存工程而退出GX Works2时，程序将被废弃。建议定时保存。

    另存时，要设定如下所示的项目信息。（覆盖保存时不需要设定。）

    命名程序的控制内容以及系统名称等，建议使用容易掌握的名称。

    ![][保存工程-1]
    ![][保存工程-2]

    ??? tip "注意事项"

        * 在存在未变换程序的状态下保存时，仅未变换部分被废弃。

            保存前，请实施在3.4节中学习过的程序变换。

        * 请将 “保存路径名+工作区名+工程名” 的输入总字符数控制在150字符以内。

    ??? note "步骤"
    
        工程 -> 工程另存为

        ![][保存工程-3]

## 第4章 调试

> 学习将程序写入可编程控制器CPU与调试的方法。

??? summary "1. 调试"

    ??? question "什么是“调试(Debug)”"

        程序完成后，确认是否按照设计正常动作。

        通常程序中的故障原因（错误）称为Bug（漏洞），侦察并改正这些错误的过程称为Debug（调试）。

        > Debug作业在编程中非常重要。
        >
        > 如果将bug放置不管，则可能导致系统停止、损坏及发生事故等。

        ??? note "GX Works2具备支持调试的功能"

            ![][调试]

        ??? tip "调试的注意事项"

            调试时，请在可编程控制器与输入输出设备不配线的状态下运行。

            否则可能因为bug而引起意想不到的动作。

            当可编程控制器无配线时，请使用仿真功能。

    ??? note "1. 不使用CPU模块的程序调试"

        调试时在手头无CPU模块的情况下，使用仿真功能。

        无需使用实际的CPU模块就可在软件上虚拟的CPU模块上运行程序。

        ![][仿真-1]

        ??? tip "使用仿真功能的注意事项"

            * 不保证调试后的顺控程序的动作。
            * 使用仿真用存储器，针对输入输出模块等进行数据的输入输出。

                此外，不支持部分指令/函数、软元件存储器。

                因此，在仿真功能上得出的运算结果可能与实际CPU模块上得出的运算结果不一致。

        ??? tip "步骤"
            
            ![][仿真-2]

            结束仿真功能：调试 -> 模拟开始/停止


    ??? note "2. 改变输入输出软元件的状态"

        使用无配线输入输出设备的CPU模块或仿真功能进行调试时，通过 强制输入输出登录/解除功能 改变输入输出软元件ON/OFF的状态。

        可在软件上强制改变已登录的输入输出软元件的ON/OFF状态。

        ![][改变状态]

        改变其他软元件的状态

        > 要改变字软元件的当前值或内部继电器等的ON/OFF时，使用当前值变更功能。
        >
        > 详情请参阅相关手册。

    ??? note "3. 监控软元件的状态"

        调试时，可监控CPU模块、仿真的执行状态和各软元件的状态。

        可实时确认输入输出设备、强制输入输出登录/解除功能的操作结果。

        ??? info "监控开始后，显示 监控状态，可确认CPU模块(仿真功能)的状态"

            监控状态 显示的各种状态的详细信息如下所示。(只介绍与本课程有关的功能。)

            ![][监控-1]

        ??? info "监控开始后，在梯形图回路上显示各软元件的状态"

            ![][监控-2]

??? note "2. 在CPU模块写入程序（使用仿真功能调试时，无需该操作。）"

    进行调试前，先在CPU模块写入顺控程序。

    > 程序写入前，请确认CPU模块已停止（STOP），计算机与CPU模块正常连接。

    ??? info "可在以下的 PC写入画面 确认写入数据的选择、CPU模块的储存器容量（剩余容量）"

        本课程中使用 参数+程序 按钮写入所有数据。


        ![][写入程序-1]

    ??? tip "步骤"

        在线 -> PLC写入

        ![][写入程序-2]
        ![][写入程序-3]
        ![][写入程序-4]

        点击执行按钮

??? note "3. 使写入的程序生效（使用仿真功能调试时，无需该操作。）"

    在程序写入CPU模块后，先复位CPU模块。

    不进行复位，写入的程序无法生效。

    ??? info "请按以下步骤进行CPU模块复位"

        ![][生效]

??? note "4. 执行程序（使用仿真功能调试时，无需该操作。）"

    复位完成后开始执行程序。

    ??? info "请按以下步骤将CPU模块设为RUN状态，并执行程序"

        ![][执行]

??? note "5. 调试程序"

    执行CPU模块后，通过强制输入输出登录/解除功能改变各软元件状态，在梯形图回路上显示其结果（输出）。

    ![][调试程序]

    ??? info "步骤"

        调试 -> 强制I/O登录/解除

        ![][调试程序-1]
        ![][调试程序-2]
        ![][调试程序-3]
        ![][调试程序-4]

??? note "6. 确认可编程控制器系统的动作"

    程序调试完后，确认实际可编程控制器系统中写入程序的最终动作。

    操作实际的输入设备，确认动作是否与设计一致，正常运行。

    即使在输入输出设备上操作，也可以通过GX Works2的监控功能确认各软元件的状态。

??? note "7. 运行可编程控制器系统"

    动作确认完后，开始运行使用可编程控制器系统。

    ??? tip "当使用中的系统出现程序修改"

        步骤：变换/编译 -> 变换+RUN中写入

        > 系统使用后会因为故障修复、系统扩展等必须修改程序的情况。
        >
        > 通常情况下，要写入已修改的程序必须停止系统（CPU模块）运行。
        >
        > 但是，也会出现使用中的系统无法停止运行的情况。
        >
        > 为了应对这种情况，准备了无需停止运行中的CPU模块也能写入程序的 RUN中写入功能。

        ![][运行]




  [编写步骤]: GX-Works2基础-images/编写步骤.png
  [软件设计]: GX-Works2基础-images/软件设计.png
  [设备构成]: GX-Works2基础-images/设备构成.png
  [对应表]: GX-Works2基础-images/对应表.png
  [设计程序]: GX-Works2基础-images/设计程序.png
  [建立项目-1]: GX-Works2基础-images/建立项目-1.png
  [建立项目-2]: GX-Works2基础-images/建立项目-2.png
  [建立项目-3]: GX-Works2基础-images/建立项目-3.png
  [建立项目-4]: GX-Works2基础-images/建立项目-4.png
  [编写程序-1]: GX-Works2基础-images/编写程序-1.png
  [编写程序-2]: GX-Works2基础-images/编写程序-2.png
  [注释-1]: GX-Works2基础-images/注释-1.png
  [注释-2]: GX-Works2基础-images/注释-2.png
  [注释-3]: GX-Works2基础-images/注释-3.png
  [注释-4]: GX-Works2基础-images/注释-4.png
  [变换成可执行-1]: GX-Works2基础-images/变换成可执行-1.png
  [变换成可执行-2]: GX-Works2基础-images/变换成可执行-2.png
  [保存工程-1]: GX-Works2基础-images/保存工程-1.png
  [保存工程-2]: GX-Works2基础-images/保存工程-2.png
  [保存工程-3]: GX-Works2基础-images/保存工程-3.png
  [调试]: GX-Works2基础-images/调试.png
  [仿真-1]: GX-Works2基础-images/仿真-1.png
  [仿真-2]: GX-Works2基础-images/仿真-2.png
  [改变状态]: GX-Works2基础-images/改变状态.png
  [监控-1]: GX-Works2基础-images/监控-1.png
  [监控-2]: GX-Works2基础-images/监控-2.png
  [写入程序-1]: GX-Works2基础-images/写入程序-1.png
  [写入程序-2]: GX-Works2基础-images/写入程序-2.png
  [写入程序-3]: GX-Works2基础-images/写入程序-3.png
  [写入程序-4]: GX-Works2基础-images/写入程序-4.png
  [生效]: GX-Works2基础-images/生效.png
  [执行]: GX-Works2基础-images/执行.png
  [调试程序]: GX-Works2基础-images/调试程序.png
  [调试程序-1]: GX-Works2基础-images/调试程序-1.png
  [调试程序-2]: GX-Works2基础-images/调试程序-2.png
  [调试程序-3]: GX-Works2基础-images/调试程序-3.png
  [调试程序-4]: GX-Works2基础-images/调试程序-4.png
  [运行]: GX-Works2基础-images/运行.png

